{% extends "base.html" %}

{% block title %}Moje album{% endblock %}

{% block content %}
  <h2>Moje kartičky</h2>

  {% if cards %}
    <div style="display: flex; flex-wrap: wrap; gap: 20px;">
      {% for card in cards %}
        <div style="border: 1px solid #ccc; padding: 15px; border-radius: 8px; width: 250px; background: #fdfdfd;">
          <h3>{{ card.name }}</h3>
          <p><strong>Tým:</strong> {{ card.get_team_display }}</p>
          <p>{{ card.description }}</p>
          
          {% if card.image %}
            <img src="{{ card.image.url }}" alt="{{ card.name }}" style="max-width: 100%; height: auto; border-radius: 5px;">
          {% endif %}

          <p><strong>Cena:</strong> {{ card.price }} Kč</p>
          <p><strong>Na prodej:</strong> {{ card.is_for_sale|yesno:"Ano,Ne" }}</p>

          <!-- Tlačítka -->
          <div style="margin-top: 10px; display: flex; flex-direction: column; gap: 5px;">
            <!-- Upravit -->
            <a href="{% url 'edit_card' card.id %}" style="padding: 5px 10px; background: #007acc; color: white; border-radius: 4px; text-decoration: none;">✏️ Upravit</a>
            
            <!-- Přepnout prodej -->
            <form method="post" action="{% url 'toggle_sale' card.id %}">
              {% csrf_token %}
              <button type="submit" style="padding: 5px 10px; background: #ffc107; border: none; border-radius: 4px;">
                {% if card.is_for_sale %}🔒 Stáhnout z burzy{% else %}🔓 Přidat na burzu{% endif %}
              </button>
            </form>

            <!-- Smazat -->
            <form method="post" action="{% url 'delete_card' card.id %}" onsubmit="return confirm('Opravdu chceš tuto kartičku smazat?');">
              {% csrf_token %}
              <button type="submit" style="padding: 5px 10px; background: #dc3545; color: white; border: none; border-radius: 4px;">🗑️ Smazat</button>
            </form>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p>Nemáš žádné kartičky v albu.</p>
  {% endif %}

  <br>
  <a href="{% url 'add_card' %}" style="padding: 10px 15px; background: #28a745; color: white; text-decoration: none; border-radius: 5px;">➕ Přidat novou kartičku</a>
{% endblock %}